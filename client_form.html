<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анкета для нанимаемых сотрудников в ОПК</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-form">
        <h2 class="form-title">Анкета для нанимаемых сотрудников в ОПК</h2>
        <form id="form" action="/submit_form" method="post">

            <div class="form-section personal-info">
                <fieldset>
                    <legend>Личная информация:</legend>
                    <div class="form-element">
                        <label for="full_name" class="required-label">ФИО:</label>
                        <input type="text" id="full_name" name="full_name" required>
                    </div>
                    
                    <div class="form-element">
                        <label for="date_of_birth" class="required-label">Дата рождения:</label>
                        <input type="date" id="date_of_birth" name="date_of_birth" required>
                    </div>
                    
                    <div class="form-element">
                        <label class="required-label">Пол:</label>
                        <input type="radio" id="male" name="gender" value="male" class="radio-input" required>
                        <label for="male">Мужской</label>
                        <input type="radio" id="female" name="gender" value="female" class="radio-input" required>
                        <label for="female">Женский</label>
                    </div>
                    
                    <div class="form-element">
                        <label for="address" class="required-label">Адрес проживания:</label>
                        <input type="text" id="address" name="address" required>
                    </div>
                    
                    <div class="form-element">
                        <label for="phone" class="required-label">Контактный телефон:</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                    
                    <div class="form-element">
                        <label for="email" class="required-label">Адрес электронной почты:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                </fieldset>
            </div>

            <div class="form-section education">
                <fieldset>
                    <legend>Образование и квалификация:</legend>
                    <div class="form-element">
                        <label for="education_level" class="required-label">Уровень образования:</label>
                        <select id="education_level" name="education_level">
                            <option value="" disabled selected>Выберите уровень образования</option>
                            <option value="Высшее">Высшее</option>
                            <option value="Среднее специальное">Среднее специальное</option>
                            <option value="Среднее">Среднее</option>
                            <option value="Другое">Другое</option>
                        </select>
                    </div>
                    
                    <div class="form-element">
                        <label for="education_institution" class="required-label">Учебное заведение:</label>
                        <input type="text" id="education_institution" name="education_institution">
                    </div>
                    
                    <div class="form-element">
                        <label for="specialization" class="required-label">Специализация:</label>
                        <input type="text" id="specialization" name="specialization">
                    </div>
                    
                    <div class="form-element">
                        <label for="graduation_year" class="required-label">Год окончания:</label>
                        <input type="number" id="graduation_year" name="graduation_year">
                    </div>
                </fieldset>
            </div>

            <div class="form-section skills">
                <fieldset>
                    <legend>Навыки и компетенции:</legend>
                    <div class="form-element">
                        <label for="technical_skills" class="required-label">Технические навыки:</label>
                        <textarea id="technical_skills" name="technical_skills" rows="4" cols="50"></textarea>
                    </div>
                    
                    <div class="form-element">
                        <label for="language_skills">Языковые навыки:</label>
                        <textarea id="language_skills" name="language_skills" rows="4" cols="50"></textarea>
                    </div>
                    
                    <div class="form-element">
                        <label for="communication_skills" class="required-label">Коммуникативные навыки:</label>
                        <textarea id="communication_skills" name="communication_skills" rows="4" cols="50"></textarea>
                    </div>
                    
                    <div class="form-element">
                        <label for="management_skills">Руководящие навыки:</label>
                        <textarea id="management_skills" name="management_skills" rows="4" cols="50"></textarea>
                    </div>
                </fieldset>
            </div>

            <div class="form-section additional-info">
                <fieldset>
                    <legend>Дополнительная информация для работы в ОПК:</legend>
                    <div class="form-element">
                        <label for="military_service">Опыт военной службы:</label>
                        <input type="text" id="military_service" name="military_service">
                    </div>
                    
                    <div class="form-element">
                        <label for="classified_data_experience">Опыт работы с классифицированными данными:</label>
                        <textarea id="classified_data_experience" name="classified_data_experience" rows="4" cols="50"></textarea>
                    </div>
                    
                    <div class="form-element">
                        <label for="project_experience">Опыт участия в проектах ОПК:</label>
                        <textarea id="project_experience" name="project_experience" rows="4" cols="50"></textarea>
                    </div>
                </fieldset>
            </div>

            <div class="form-section security">
                <fieldset>
                    <legend>Секретность и опыт в ОПК:</legend>
                    
                    <div class="form-element">
                        <label for="previous_opk_experience" class="required-label">Опыт работы в ОПК:</label>
                        <textarea id="previous_opk_experience" name="previous_opk_experience" rows="4" cols="50"></textarea>
                    </div>
                </fieldset>
            </div>

            <button type="submit" class="submit-button">Отправить</button> 
        </form>
    </div>
    <script>
        const form = document.getElementById('form');

        // Обработка отправки формы через AJAX
        form.addEventListener('submit', function(event) {
            console.log(event.targetaformData);
            console.log('Форма отправлена');
            event.preventDefault();

            const formData = {}
            Array.prototype.forEach.call(form.elements, element => {
                formData[element.name] = element.value
            })
            console.log(formData);
            
            // Выполняем AJAX запрос на сервер
            fetch('/submit_form', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                console.log('Ответ от сервера получен');
                if (response.ok) {
                    console.log('Успешный ответ от сервера');
                    alert('Анкета успешно отправлена!');
                    document.getElementById('form').reset();
                } else {
                    console.log('Ошибка ответа от сервера');
                    alert('Произошла ошибка при отправке анкеты.');
                }
            })
            .catch(error => {
                console.error('Ошибка:', error);
                alert('Произошла ошибка при отправке анкеты. Пожалуйста, попробуйте еще раз.');
            });
        });
    </script>
</body>
</html>